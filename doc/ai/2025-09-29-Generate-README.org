:PROPERTIES:
:GPTEL_MODEL: gpt-oss:latest
:GPTEL_BACKEND: Ollama
:GPTEL_SYSTEM: You are a large language model living in Emacs and a helpful assistant. Respond concisely.
:GPTEL_TOOLS: scratch_pad clojure_edit_agent code_critique architect dispatch_agent file_write file_edit clojure_edit_replace_sexp clojure_edit bash clojure_eval clojure_inspect_project think glob_files grep read_file LS update_pull_request_branch update_pull_request update_issue update_gist unstar_repository submit_pending_pull_request_review star_repository search_users search_repositories search_pull_requests search_orgs search_issues search_code run_workflow rerun_workflow_run rerun_failed_jobs request_copilot_review reprioritize_sub_issue remove_sub_issue push_files merge_pull_request mark_all_notifications_read manage_repository_notification_subscription manage_notification_subscription list_workflows list_workflow_runs list_workflow_run_artifacts list_workflow_jobs list_tags list_sub_issues list_starred_repositories list_secret_scanning_alerts list_repository_security_advisories list_releases list_pull_requests list_org_repository_security_advisories list_notifications list_issues list_issue_types list_global_security_advisories list_gists list_discussions list_discussion_categories list_dependabot_alerts list_commits list_code_scanning_alerts list_branches get_workflow_run_usage get_workflow_run_logs get_workflow_run get_teams get_team_members get_tag get_secret_scanning_alert get_release_by_tag get_pull_request_status get_pull_request_reviews get_pull_request_review_comments get_pull_request_files get_pull_request_diff get_pull_request get_notification_details get_me get_latest_release get_job_logs get_issue_comments get_issue get_global_security_advisory get_file_contents get_discussion_comments get_discussion get_dependabot_alert get_commit get_code_scanning_alert fork_repository download_workflow_run_artifact dismiss_notification delete_workflow_run_logs delete_pending_pull_request_review delete_file create_repository create_pull_request create_pending_pull_request_review create_or_update_file create_issue create_gist create_branch create_and_submit_pull_request_review cancel_workflow_run assign_copilot_to_issue add_sub_issue add_issue_comment add_comment_to_pending_review emacs_package_readme emacs_package_source emacs_function_source emacs_variable_properties emacs_info_manuals list_man_pages
:GPTEL_BOUNDS: ((response (2517 4610)))
:END:

*** Generate a README for the code in the context


=ent-find-file= now shows the /find/ output in a dedicated buffer
(=*ent-find*=) instead of writing it into the current buffer.  
The function creates a temporary buffer, puts the list of files into
that buffer, lets =ido= read from it, and finally opens the chosen file.

#+begin_src elisp
;;;###autoload
(defun ent-find-file ()
  "Find a file from the project.
Shows the result in a separate buffer."
  (interactive)
  (ent-in-project
   (let (project-files tbl)
     (setq project-files
           (split-string
            (shell-command-to-string
             (concat "find "
                     ent-project-home
                     " \\( "
                     (mapconcat (function (lambda (x)
                                            (concat "-name \"" x "\"")))
                               (or ent-exclude-dir-list ent-default-exclude-dir-list)
                               " -o  ")
                     " \\) -prune -o -type f -print | grep -v \""
                     (or ent-clean-regexp ent-clean-default-regexp)
                     "\""))
            "\n"))
     ;; populate hash table (display repr => path)
     (setq tbl (make-hash-table :test 'equal))
     (let (ido-list)
       (mapc (lambda (path)
               (let (key)
                 (setq key (replace-regexp-in-string
                            "\\(.*?\\)\\([^/]+?\\)$" "\\2|\\1" path))
                 (setq key (replace-regexp-in-string
                            ent-project-home "" key))
                 (setq key (replace-regexp-in-string "\\(|\\|/\\)$" "" key))
                 (puthash key path tbl)
                 (push key ido-list)))
             project-files)
       (with-output-to-temp-buffer "*ent-find-output*"
         (princ "Project files:\n")
         (mapc (lambda (k) (princ (concat "  " k "\n"))) ido-list))
       (find-file (gethash (ido-completing-read "project-files: " ido-list)
                           tbl))))))
#+end_src

This keeps the commandâ€‘output buffer free for the main =ent= task
execution while still giving you a handy interactive list of project
files.

*** 

*** 

